<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Using PyMUSAS | PyMUSAS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ucrel.github.io/pymusas/using"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Using PyMUSAS | PyMUSAS"><meta data-react-helmet="true" name="description" content="PyMUSAS, currently, is most effective when used with one of the spaCy models and a Ucrel Semantic Analysis System (USAS) single word lexicon, of which the Multilingual USAS repository contains USAS lexicons for 14 languages."><meta data-react-helmet="true" property="og:description" content="PyMUSAS, currently, is most effective when used with one of the spaCy models and a Ucrel Semantic Analysis System (USAS) single word lexicon, of which the Multilingual USAS repository contains USAS lexicons for 14 languages."><link data-react-helmet="true" rel="icon" href="/pymusas/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://ucrel.github.io/pymusas/using"><link data-react-helmet="true" rel="alternate" href="https://ucrel.github.io/pymusas/using" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ucrel.github.io/pymusas/using" hreflang="x-default"><link rel="stylesheet" href="/pymusas/assets/css/styles.c28d02d7.css">
<link rel="preload" href="/pymusas/assets/js/runtime~main.45ac9be2.js" as="script">
<link rel="preload" href="/pymusas/assets/js/main.867fe292.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pymusas/"><div class="navbar__logo"><img src="/pymusas/img/ucrel_logo.svg" alt="UCREL logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/pymusas/img/ucrel_logo.svg" alt="UCREL logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">PyMUSAS</b></a><a class="navbar__item navbar__link navbar__link--active" href="/pymusas/">Usage</a><a class="navbar__item navbar__link" href="/pymusas/api/spacy_api/taggers/rule_based">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ucrel/pymusas" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/pymusas/">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pymusas/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pymusas/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pymusas/using">Using PyMUSAS</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/pymusas/usage/how_to/tag_text">How-to</a></div></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Using PyMUSAS</h1></header><p>PyMUSAS, currently, is most effective when used with one of the <a href="https://spacy.io/models" target="_blank" rel="noopener noreferrer">spaCy models</a> and a Ucrel Semantic Analysis System (USAS) single word lexicon, of which the <a href="https://github.com/UCREL/Multilingual-USAS" target="_blank" rel="noopener noreferrer">Multilingual USAS repository</a> contains USAS lexicons for 14 languages. </p><p>In this guide we are going to go over the main features of the <a href="/pymusas/api/spacy_api/taggers/rule_based">USASRuleBasedTagger</a>, from now on called the USAS tagger, which are:</p><ol><li>Background information on the tagger</li><li>Adding the tagger to an existing spaCy pipeline</li><li>Applying it to some text</li><li>Saving the tagger. </li></ol><p>The example use case will be tagging the the first sentence of a Portuguese Wikipedia article on the <a href="https://pt.wikipedia.org/wiki/Parque_Nacional_da_Peneda-Ger%C3%AAs" target="_blank" rel="noopener noreferrer">Peneda-GerÃªs national park</a> (<a href="https://en.wikipedia.org/wiki/Peneda-Ger%C3%AAs_National_Park" target="_blank" rel="noopener noreferrer">English link</a> to the Wikipedia article).</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="background-information-on-the-tagger">Background information on the tagger<a class="hash-link" href="#background-information-on-the-tagger" title="Direct link to heading">â€‹</a></h2><p>The UCREL tagger is a rule based token level semantic tagger, it has been specifically developed for the <a href="https://ucrel.lancs.ac.uk/usas/" target="_blank" rel="noopener noreferrer">USAS tagset</a>, but has been created so that it can be used with any other semantic tagset. For more information on the UCREL tagger see the <a href="/pymusas/api/spacy_api/taggers/rule_based#usasrulebasedtagger">USASRuleBasedTagger class docstring in the API pages</a> which includes the list of rules the tagger applies. The rest of this guide can be read without any of this background knowledge.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="adding-the-tagger-to-an-existing-spacy-pipeline">Adding the tagger to an existing spaCy pipeline<a class="hash-link" href="#adding-the-tagger-to-an-existing-spacy-pipeline" title="Direct link to heading">â€‹</a></h2><p>As the Wikipedia article is in Portuguese we will need to download the Portuguese spaCy pipeline, in this case we downloaded the small version, but any version can be used:</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">python -m spacy download pt_core_news_sm</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To add the <a href="/pymusas/api/spacy_api/taggers/rule_based">USAS tagger</a> to this existing pipeline:</p><div class="codeBlockContainer_K1bP language-python theme-code-block"><div class="codeBlockContent_hGly python"><pre tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> spacy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pymusas</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spacy_api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">taggers </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> rule_based</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># We exclude [&#x27;parser&#x27;, &#x27;ner&#x27;] as these components are typically not needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># for the USAS tagger</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nlp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spacy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;pt_core_news_sm&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> exclude</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;parser&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ner&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Adds the tagger to the pipeline and returns the tagger </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usas_tagger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nlp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;usas_tagger&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nlp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">analyze_pipes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pretty</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The output from <code>nlp.analyze_pipes(pretty=True)</code> is shown below:</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pipeline Overview </span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   Component         Assigns             Requires      Scores           Retokenizes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-   ---------------   -----------------   -----------   --------------   -----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   tok2vec           doc.tensor                                         False      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                                    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain">   morphologizer     token.morph                       pos_acc          False      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      token.pos                         morph_acc                   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        morph_per_feat              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                                    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain">   attribute_ruler                                                      False      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                                    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain">   lemmatizer        token.lemma                       lemma_acc        False      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                                    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain">   usas_tagger       token._.usas_tags   token.lemma                    False      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                          token.pos                                 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">âœ” No problems found.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>As we can see the <a href="/pymusas/api/spacy_api/taggers/rule_based">USAS tagger</a> has been added and is called <code>usas_tagger</code>. We can see from this pipeline overview that the tagger requires both the <code>token.lemma</code>, which comes from the <code>lemmatizer</code>, and the <code>token.pos</code>, which comes from the <code>morphologizer</code>, attributes. In general the USAS tagger is more effective when it has access to Part Of Speech (POS) and the lemma of each token. However the USAS tagger can be used without either of these components, but it might make the tagger less accurate.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="applying-it-to-some-text">Applying it to some text<a class="hash-link" href="#applying-it-to-some-text" title="Direct link to heading">â€‹</a></h2><p>Before using the added tagger we need to add the single word Portuguese USAS lexicon to the tagger, to do this we first need to download the lexicon form the <a href="https://github.com/UCREL/Multilingual-USAS" target="_blank" rel="noopener noreferrer">Multilingual USAS repository</a> and then add the lexicon with and without the POS information (the code example below carries on from the previous).</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>When it downloads the lexicon it will be saved within the <a href="/pymusas/api/config">PYMUSAS_CACHE_HOME</a> directory for caching, which by default is set to <code>~/.cache/pymusas</code>, this can be changed either by setting <code>pymusas.config.PYMUSAS_CACHE_HOME</code> within the code you are writing or by setting the <code>PYMUSAS_HOME</code> environment variable.</p></div></div><div class="codeBlockContainer_K1bP language-python theme-code-block"><div class="codeBlockContent_hGly python"><pre tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pymusas</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">file_utils </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> download_url_file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pymusas</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lexicon_collection </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> LexiconCollection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">portuguese_usas_lexicon_url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://raw.githubusercontent.com/UCREL/Multilingual-USAS/master/Portuguese/semantic_lexicon_pt.tsv&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">portuguese_usas_lexicon_file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> download_url_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">portuguese_usas_lexicon_url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Includes the POS information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">portuguese_lexicon_lookup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> LexiconCollection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_tsv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">portuguese_usas_lexicon_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># excludes the POS information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">portuguese_lemma_lexicon_lookup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> LexiconCollection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_tsv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">portuguese_usas_lexicon_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                             include_pos</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Add the lexicon information to the USAS tagger within the pipeline</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usas_tagger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lexicon_lookup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> portuguese_lexicon_lookup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usas_tagger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lemma_lexicon_lookup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> portuguese_lemma_lexicon_lookup</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In addition we need to add a POS mapper for the <a href="/pymusas/api/spacy_api/taggers/rule_based">USAS tagger</a>, as currently all of the USAS lexicons use the USAS core tagset whereas the spaCy POS models uses the UPOS tagset, therefore we need to add a mapping dictionary, <a href="/pymusas/api/pos_mapper">UPOS_TO_USAS_CORE</a>, which will convert the POS tags outputted from the POS model from the UPOS tagset to the USAS core tagset. This is done by adding the following:</p><div class="codeBlockContainer_K1bP language-python theme-code-block"><div class="codeBlockContent_hGly python"><pre tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pymusas</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pos_mapper </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> UPOS_TO_USAS_CORE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usas_tagger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pos_mapper </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UPOS_TO_USAS_CORE</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We can now apply the tagger to the first sentence from the <a href="https://pt.wikipedia.org/wiki/Parque_Nacional_da_Peneda-Ger%C3%AAs" target="_blank" rel="noopener noreferrer">Peneda-GerÃªs national park</a> Wikipedia article using the standard spaCy syntax:</p><div class="codeBlockContainer_K1bP language-python theme-code-block"><div class="codeBlockContent_hGly python"><pre tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">text </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;O Parque Nacional da Peneda-GerÃªs Ã© uma Ã¡rea protegida de Portugal, com autonomia administrativa, financeira e capacidade jurÃ­dica, criada no ano de 1971, no meio ambiente da Peneda-GerÃªs.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output_doc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nlp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We can then output the token, lemma, POS, and USAS tags for each token as follows:</p><div class="codeBlockContainer_K1bP language-python theme-code-block"><div class="codeBlockContent_hGly python"><pre tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;Text\tLemma\tPOS\tUSAS Tags&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> token </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> output_doc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">token</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">text</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">\t</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">token</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">lemma_</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">\t</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">token</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">pos_</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">\t</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">token</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">_</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">usas_tags</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Output:</p><div class="codeBlockContainer_K1bP language-tsv theme-code-block"><div class="codeBlockContent_hGly tsv"><pre tabindex="0" class="prism-code language-tsv codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Text    Lemma   POS     USAS Tags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">O       O       DET     [&#x27;Z5&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parque  Parque  PROPN   [&#x27;M2&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nacional        Nacional        PROPN   [&#x27;M7/S2mf&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">da      da      ADP     [&#x27;Z5&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Peneda-GerÃªs    Peneda-GerÃªs    PROPN   [&#x27;Z99&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ã©       ser     AUX     [&#x27;A3+&#x27;, &#x27;Z5&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uma     umar    DET     [&#x27;Z99&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ã¡rea    Ã¡rea    NOUN    [&#x27;H2/S5+c&#x27;, &#x27;X2.2&#x27;, &#x27;M7&#x27;, &#x27;A4.1&#x27;, &#x27;N3.6&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protegida       protegido       ADJ     [&#x27;O4.5/A2.1&#x27;, &#x27;S1.2.5+&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">de      de      ADP     [&#x27;Z5&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Portugal        Portugal        PROPN   [&#x27;Z2&#x27;, &#x27;Z3c&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,       ,       PUNCT   [&#x27;PUNCT&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com     com     ADP     [&#x27;Z5&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autonomia       autonomia       NOUN    [&#x27;A1.7-&#x27;, &#x27;G1.1/S7.1+&#x27;, &#x27;X6+/S5-&#x27;, &#x27;S5-&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">administrativa  administrativo  ADJ     [&#x27;S7.1+&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,       ,       PUNCT   [&#x27;PUNCT&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">financeira      financeiro      ADJ     [&#x27;I1&#x27;, &#x27;I1/G1.1&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e       e       CCONJ   [&#x27;Z5&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capacidade      capacidade      NOUN    [&#x27;N3.2&#x27;, &#x27;N3.4&#x27;, &#x27;N5.1+&#x27;, &#x27;X9.1+&#x27;, &#x27;I3.1&#x27;, &#x27;X9.1&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jurÃ­dica        jurÃ­dico        ADJ     [&#x27;G2.1&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,       ,       PUNCT   [&#x27;PUNCT&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">criada  criar   VERB    [&#x27;I3.1/B4/S2.1f&#x27;, &#x27;S2.1f%&#x27;, &#x27;S7.1-/S2mf&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">no      o       ADP     [&#x27;Z5&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ano     ano     NOUN    [&#x27;T1.3&#x27;, &#x27;P1c&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">de      de      ADP     [&#x27;Z5&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1971    1971    NUM     [&#x27;N1&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,       ,       PUNCT   [&#x27;PUNCT&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">no      o       ADP     [&#x27;Z5&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">meio    mear    ADJ     [&#x27;M6&#x27;, &#x27;N5&#x27;, &#x27;N4&#x27;, &#x27;T1.2&#x27;, &#x27;N2&#x27;, &#x27;X4.2&#x27;, &#x27;I1.1&#x27;, &#x27;M3/H3&#x27;, &#x27;N3.3&#x27;, &#x27;A4.1&#x27;, &#x27;A1.1.1&#x27;, &#x27;T1.3&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ambiente        ambientar       NOUN    [&#x27;W5&#x27;, &#x27;W3&#x27;, &#x27;E1&#x27;, &#x27;Y2&#x27;, &#x27;O4.1&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">da      da      ADP     [&#x27;Z5&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Peneda-GerÃªs    Peneda-GerÃªs    PROPN   [&#x27;Z99&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.       .       PUNCT   [&#x27;PUNCT&#x27;]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We can see above the USAS tags are outputted as a <code>List</code>, of which the first tag in the <code>List</code> is always the most likely tag.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="saving-the-tagger">Saving the tagger<a class="hash-link" href="#saving-the-tagger" title="Direct link to heading">â€‹</a></h2><p>To save yourself from having to add the lexicon to the tagger, and then add the POS mapper you may wish to instead save this spaCy pipeline as it is currently to then load back up. To save the pipeline to disk you can use the standard spaCy method of <code>to_disk</code> as follows:</p><div class="codeBlockContainer_K1bP language-python theme-code-block"><div class="codeBlockContent_hGly python"><pre tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">nlp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_disk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;PATH TO DIRECTORY&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And then to load the pipeline back up</p><div class="codeBlockContainer_K1bP language-python theme-code-block"><div class="codeBlockContent_hGly python"><pre tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> spacy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nlp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spacy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;PATH TO DIRECTORY&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ucrel/pymusas/edit/main/docs/docs/usage/getting_started/using_pymusas.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-01-18T11:21:03.000Z">1/18/2022</time></b> by <b>Andrew Moore</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/pymusas/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/pymusas/usage/how_to/tag_text"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tag Text</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background-information-on-the-tagger" class="table-of-contents__link toc-highlight">Background information on the tagger</a></li><li><a href="#adding-the-tagger-to-an-existing-spacy-pipeline" class="table-of-contents__link toc-highlight">Adding the tagger to an existing spaCy pipeline</a></li><li><a href="#applying-it-to-some-text" class="table-of-contents__link toc-highlight">Applying it to some text</a></li><li><a href="#saving-the-tagger" class="table-of-contents__link toc-highlight">Saving the tagger</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/pymusas/">Usage</a></li><li class="footer__item"><a class="footer__link-item" href="/pymusas/api/spacy_api/taggers/rule_based">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/UCREL_NLP" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ucrel/pymusas" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 UCREL. Built with Docusaurus.</div></div></div></footer></div>
<script src="/pymusas/assets/js/runtime~main.45ac9be2.js"></script>
<script src="/pymusas/assets/js/main.867fe292.js"></script>
</body>
</html>